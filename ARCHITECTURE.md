# Lume UI æ¶æ„æ–‡æ¡£

> å‚è€ƒ Element Plus çš„ä¼˜ç§€å®è·µï¼Œæ„å»ºç°ä»£åŒ– React ç»„ä»¶åº“ Monorepo æ¶æ„

## ğŸ“ é¡¹ç›®ç»“æ„

```
lume-ui/
â”œâ”€â”€ packages/                    # ç»„ä»¶åŒ…ç›®å½•
â”‚   â”œâ”€â”€ components/             # UI ç»„ä»¶ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â”‚   â”œâ”€â”€ button/            # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ cascader/          # çº§è”é€‰æ‹©å™¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...                # å…¶ä»–ç»„ä»¶
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°åŒ…
â”‚   â”œâ”€â”€ theme/                 # ä¸»é¢˜åŒ…ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚   â””â”€â”€ hooks/                 # React Hooks åŒ…ï¼ˆæœªæ¥æ‰©å±•ï¼‰
â”‚
â”œâ”€â”€ internal/                   # å†…éƒ¨å·¥å…·å’Œé…ç½®
â”‚   â”œâ”€â”€ build/                 # æ„å»ºé…ç½®å’Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ vite.config.base.ts       # Vite åŸºç¡€é…ç½®
â”‚   â”‚   â”œâ”€â”€ tsup.config.base.ts       # tsup åŸºç¡€é…ç½®
â”‚   â”‚   â””â”€â”€ rollup-plugins/           # è‡ªå®šä¹‰ Rollup æ’ä»¶
â”‚   â””â”€â”€ shared/                # å…±äº«å·¥å…·å’Œç±»å‹
â”‚       â”œâ”€â”€ types/             # å…¨å±€ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ utils/             # æ„å»ºå·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ play/                       # å¼€å‘æµ‹è¯•ç¯å¢ƒï¼ˆåŸ examplesï¼‰
â”‚   â”œâ”€â”€ app/                   # Next.js åº”ç”¨
â”‚   â”œâ”€â”€ components/            # æµ‹è¯•ç»„ä»¶
â”‚   â””â”€â”€ public/                # é™æ€èµ„æº
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£ç«™ç‚¹ï¼ˆæœªæ¥ï¼‰
â”‚   â”œâ”€â”€ guide/                 # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ components/            # ç»„ä»¶æ–‡æ¡£
â”‚   â””â”€â”€ examples/              # ç¤ºä¾‹ä»£ç 
â”‚
â”œâ”€â”€ scripts/                    # æ„å»ºå’Œå‘å¸ƒè„šæœ¬
â”‚   â”œâ”€â”€ build.ts               # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ release.ts             # å‘å¸ƒè„šæœ¬
â”‚   â”œâ”€â”€ gen-version.ts         # ç‰ˆæœ¬ç”Ÿæˆ
â”‚   â””â”€â”€ utils/                 # è„šæœ¬å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ typings/                    # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ env.d.ts               # ç¯å¢ƒå˜é‡ç±»å‹
â”‚   â”œâ”€â”€ global.d.ts            # å…¨å±€ç±»å‹
â”‚   â””â”€â”€ components.d.ts        # ç»„ä»¶ç±»å‹å£°æ˜
â”‚
â”œâ”€â”€ .github/                    # GitHub é…ç½®
â”‚   â”œâ”€â”€ workflows/             # CI/CD å·¥ä½œæµ
â”‚   â””â”€â”€ ISSUE_TEMPLATE/        # Issue æ¨¡æ¿
â”‚
â”œâ”€â”€ package.json               # æ ¹ package.json
â”œâ”€â”€ pnpm-workspace.yaml        # pnpm workspace é…ç½®
â”œâ”€â”€ tsconfig.json              # TypeScript åŸºç¡€é…ç½®
â”œâ”€â”€ .npmrc                     # npm é…ç½®
â””â”€â”€ turbo.json                 # Turbo ç¼“å­˜é…ç½®ï¼ˆæœªæ¥ï¼‰
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡åŸåˆ™

### 1. å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰

å‚è€ƒ Element Plusï¼Œæˆ‘ä»¬å°†é¡¹ç›®åˆ’åˆ†ä¸ºæ¸…æ™°çš„å±‚æ¬¡ï¼š

- **packages/**: å¯¹å¤–å‘å¸ƒçš„åŒ…ï¼ŒåªåŒ…å«ä¸šåŠ¡é€»è¾‘
- **internal/**: å†…éƒ¨å·¥å…·å’Œé…ç½®ï¼Œä¸å¯¹å¤–å‘å¸ƒ
- **play/**: å¼€å‘ç¯å¢ƒï¼Œç”¨äºå¿«é€Ÿæµ‹è¯•å’Œæ¼”ç¤º
- **docs/**: æ–‡æ¡£ç«™ç‚¹ï¼Œç‹¬ç«‹éƒ¨ç½²
- **scripts/**: è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œæå‡å¼€å‘æ•ˆç‡

### 2. ç»Ÿä¸€çš„æ„å»ºé…ç½®

**é—®é¢˜**ï¼šå½“å‰æ¯ä¸ªç»„ä»¶åŒ…éƒ½æœ‰è‡ªå·±çš„æ„å»ºé…ç½®ï¼Œå¯¼è‡´ï¼š

- é…ç½®é‡å¤
- éš¾ä»¥ç»´æŠ¤
- ä¸ä¸€è‡´çš„æ„å»ºè¾“å‡º

**è§£å†³æ–¹æ¡ˆ**ï¼š

- åœ¨ `internal/build/` ä¸­æä¾›åŸºç¡€æ„å»ºé…ç½®
- å„ç»„ä»¶åŒ…ç»§æ‰¿å¹¶æ‰©å±•åŸºç¡€é…ç½®
- ä¿è¯æ„å»ºäº§ç‰©çš„ä¸€è‡´æ€§

### 3. ç±»å‹ç³»ç»Ÿç»Ÿä¸€ç®¡ç†

**å‚è€ƒ Element Plus çš„ typings/ ç›®å½•**ï¼š

- å…¨å±€ç±»å‹å®šä¹‰é›†ä¸­ç®¡ç†
- ç»„ä»¶ç±»å‹è‡ªåŠ¨ç”Ÿæˆ
- æä¾›å®Œå–„çš„ TypeScript æ”¯æŒ

### 4. å¼€å‘æ•ˆç‡ä¼˜åŒ–

**play/ ç›®å½•è®¾è®¡**ï¼ˆå‚è€ƒ Element Plus çš„ play/ï¼‰ï¼š

- å¿«é€Ÿæµ‹è¯•æ–°åŠŸèƒ½
- çƒ­æ›´æ–°å¼€å‘ä½“éªŒ
- å¯è§†åŒ–ç»„ä»¶å±•ç¤º

## ğŸ“¦ ç»„ä»¶åŒ…ç»“æ„è§„èŒƒ

å‚è€ƒ Element Plusï¼Œæ¯ä¸ªç»„ä»¶åŒ…åº”éµå¾ªç»Ÿä¸€çš„ç»“æ„ï¼š

```
packages/components/button/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ button.tsx            # ç»„ä»¶å®ç°
â”‚   â”œâ”€â”€ button.types.ts       # ç»„ä»¶ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ button.styles.ts      # æ ·å¼ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ index.ts              # å¯¼å‡ºå…¥å£
â”‚   â””â”€â”€ __tests__/            # æµ‹è¯•æ–‡ä»¶
â”‚       â””â”€â”€ button.test.tsx
â”œâ”€â”€ dist/                     # æ„å»ºäº§ç‰©
â”œâ”€â”€ package.json              # åŒ…é…ç½®
â”œâ”€â”€ README.md                 # ç»„ä»¶æ–‡æ¡£
â”œâ”€â”€ tsconfig.json             # TS é…ç½®ï¼ˆç»§æ‰¿æ ¹é…ç½®ï¼‰
â””â”€â”€ vite.config.ts            # æ„å»ºé…ç½®ï¼ˆç»§æ‰¿ internal/buildï¼‰
```

### åŒ…å‘½åè§„èŒƒ

- **èŒƒå›´åŒ…**: `@lume-ui/ç»„ä»¶å`
- **ç»Ÿä¸€å‰ç¼€**: ä¾¿äºè¯†åˆ«å’Œç®¡ç†
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬**: éµå¾ª semver è§„èŒƒ

## ğŸ”§ æ„å»ºç³»ç»Ÿ

### æ„å»ºå·¥å…·é€‰æ‹©

å‚è€ƒ Element Plus çš„å®è·µï¼Œæ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©å·¥å…·ï¼š

| å·¥å…·       | é€‚ç”¨åœºæ™¯        | ä½¿ç”¨åŒ…                                 |
| ---------- | --------------- | -------------------------------------- |
| **Vite**   | åŒ…å«æ ·å¼çš„ç»„ä»¶  | `@lume-ui/button`, `@lume-ui/cascader` |
| **tsup**   | çº¯ TS/JS å·¥å…·åŒ… | `@lume-ui/utils`, `@lume-ui/hooks`     |
| **Rollup** | å¤æ‚æ„å»ºéœ€æ±‚    | æœªæ¥æ‰©å±•                               |

### æ„å»ºäº§ç‰©è§„èŒƒ

æ¯ä¸ªåŒ…åº”è¾“å‡ºï¼š

- **ESM**: `dist/index.mjs` - ç°ä»£æ„å»ºå·¥å…·ä½¿ç”¨
- **CJS**: `dist/index.js` - Node.js å’Œæ—§å·¥å…·ä½¿ç”¨
- **Types**: `dist/index.d.ts` - TypeScript ç±»å‹
- **Styles**: `dist/styles.css` - æ ·å¼æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰

### package.json å¯¼å‡ºè§„èŒƒ

```json
{
  "name": "@lume-ui/button",
  "main": "./dist/index.js",
  "module": "./dist/index.mjs",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.mjs",
      "require": "./dist/index.js"
    },
    "./styles.css": "./dist/styles.css"
  },
  "sideEffects": ["*.css"]
}
```

## ğŸ¯ ä¾èµ–ç®¡ç†ç­–ç•¥

### peerDependencies åŸåˆ™

å‚è€ƒ Element Plusï¼Œæ ¸å¿ƒä¾èµ–ä½¿ç”¨ `peerDependencies`ï¼š

```json
{
  "peerDependencies": {
    "react": "^18.0.0 || ^19.0.0",
    "react-dom": "^18.0.0 || ^19.0.0"
  }
}
```

**åŸå› **ï¼š

1. é¿å…å¤šä¸ª React å®ä¾‹å†²çª
2. è®©ä½¿ç”¨è€…æ§åˆ¶ React ç‰ˆæœ¬
3. å‡å°åŒ…ä½“ç§¯

### workspace ä¾èµ–

å†…éƒ¨åŒ…äº’ç›¸ä¾èµ–ä½¿ç”¨ `workspace:^` åè®®ï¼š

```json
{
  "dependencies": {
    "@lume-ui/utils": "workspace:^"
  }
}
```

### .npmrc é…ç½®

å‚è€ƒ Element Plus çš„ä¾èµ–æå‡ç­–ç•¥ï¼š

```ini
# æå‡ React ç›¸å…³åŒ…åˆ°æ ¹ç›®å½•ï¼Œé¿å…å¤šå®ä¾‹é—®é¢˜
public-hoist-pattern[]=*react*
public-hoist-pattern[]=*@types/react*

# ä¸¥æ ¼çš„ peer dependencies æ£€æŸ¥
strict-peer-dependencies=false

# é“¾æ¥ workspace åŒ…
link-workspace-packages=true
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

å‚è€ƒ Element Plusï¼Œä½¿ç”¨ Vitest ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼š

```
packages/button/
â””â”€â”€ src/
    â”œâ”€â”€ button.tsx
    â””â”€â”€ __tests__/
        â”œâ”€â”€ button.test.tsx          # å•å…ƒæµ‹è¯•
        â””â”€â”€ button.accessibility.test.tsx  # å¯è®¿é—®æ€§æµ‹è¯•
```

### æµ‹è¯•é…ç½®ç»Ÿä¸€ç®¡ç†

```
internal/
â””â”€â”€ build/
    â”œâ”€â”€ vitest.config.base.ts    # Vitest åŸºç¡€é…ç½®
    â””â”€â”€ test-utils/              # æµ‹è¯•å·¥å…·å‡½æ•°
        â”œâ”€â”€ render.tsx           # è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°
        â””â”€â”€ matchers.ts          # è‡ªå®šä¹‰åŒ¹é…å™¨
```

## ğŸ“ æ–‡æ¡£ç³»ç»Ÿï¼ˆæœªæ¥è§„åˆ’ï¼‰

å‚è€ƒ Element Plus ä½¿ç”¨ VitePress æ„å»ºæ–‡æ¡£ç«™ç‚¹ï¼š

```
docs/
â”œâ”€â”€ .vitepress/              # VitePress é…ç½®
â”‚   â”œâ”€â”€ config.ts           # ç«™ç‚¹é…ç½®
â”‚   â””â”€â”€ theme/              # è‡ªå®šä¹‰ä¸»é¢˜
â”œâ”€â”€ guide/                  # æŒ‡å—
â”‚   â”œâ”€â”€ getting-started.md  # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ installation.md     # å®‰è£…
â”‚   â””â”€â”€ theming.md         # ä¸»é¢˜å®šåˆ¶
â”œâ”€â”€ components/             # ç»„ä»¶æ–‡æ¡£
â”‚   â”œâ”€â”€ button.md
â”‚   â””â”€â”€ cascader.md
â””â”€â”€ examples/               # ç¤ºä¾‹
    â””â”€â”€ basic-usage.md
```

## ğŸš€ å‘å¸ƒæµç¨‹

å‚è€ƒ Element Plus çš„å‘å¸ƒæµç¨‹ï¼š

1. **ç‰ˆæœ¬ç®¡ç†**: ä½¿ç”¨ `changeset` ç®¡ç†ç‰ˆæœ¬å’Œ changelog
2. **æ„å»ºæ£€æŸ¥**: ç¡®ä¿æ‰€æœ‰åŒ…æ„å»ºæˆåŠŸ
3. **æµ‹è¯•éªŒè¯**: è¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
4. **è‡ªåŠ¨å‘å¸ƒ**: GitHub Actions è‡ªåŠ¨å‘å¸ƒåˆ° npm

### scripts/ ç›®å½•

```
scripts/
â”œâ”€â”€ build.ts              # æ„å»ºæ‰€æœ‰åŒ…
â”œâ”€â”€ release.ts            # å‘å¸ƒæµç¨‹
â”œâ”€â”€ gen-version.ts        # ç”Ÿæˆç‰ˆæœ¬æ–‡ä»¶
â”œâ”€â”€ gen-types.ts          # ç”Ÿæˆç±»å‹å£°æ˜
â””â”€â”€ utils/
    â”œâ”€â”€ logger.ts         # æ—¥å¿—å·¥å…·
    â””â”€â”€ exec.ts           # å‘½ä»¤æ‰§è¡Œå·¥å…·
```

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿï¼ˆæœªæ¥è§„åˆ’ï¼‰

å‚è€ƒ Element Plus çš„ä¸»é¢˜ç³»ç»Ÿï¼š

```
packages/
â””â”€â”€ theme/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ tokens.css          # CSS å˜é‡å®šä¹‰
    â”‚   â”œâ”€â”€ components/         # ç»„ä»¶æ ·å¼
    â”‚   â””â”€â”€ utilities.css       # å·¥å…·ç±»
    â””â”€â”€ package.json
```

## ğŸ”„ ä¸ Element Plus çš„å…³é”®å·®å¼‚

| æ–¹é¢         | Element Plus  | Lume UI           | åŸå›            |
| ------------ | ------------- | ----------------- | -------------- |
| **æ¡†æ¶**     | Vue 3         | React             | æŠ€æœ¯æ ˆä¸åŒ     |
| **æ ·å¼æ–¹æ¡ˆ** | SCSS          | Tailwind CSS      | ç°ä»£åŒ–å·¥å…·é“¾   |
| **æ„å»ºå·¥å…·** | Vite + Rollup | Vite + tsup       | ç®€åŒ–æ„å»ºé…ç½®   |
| **æµ‹è¯•æ¡†æ¶** | Vitest + Jest | Vitest            | ç»Ÿä¸€æµ‹è¯•ç¯å¢ƒ   |
| **æ–‡æ¡£å·¥å…·** | VitePress     | VitePressï¼ˆè®¡åˆ’ï¼‰ | ä¼˜ç§€çš„æ–‡æ¡£ä½“éªŒ |

## ğŸ¯ é‡æ„è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¶æ„ï¼ˆå½“å‰ï¼‰

- âœ… åˆ›å»º internal/ ç›®å½•ç»“æ„
- âœ… é‡å‘½å examples ä¸º play
- âœ… ç»Ÿä¸€æ„å»ºé…ç½®
- âœ… å®Œå–„ç±»å‹å®šä¹‰

### Phase 2: å¼€å‘ä½“éªŒä¼˜åŒ–

- â³ é›†æˆ Turbo åŠ é€Ÿæ„å»º
- â³ æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•
- â³ é…ç½® GitHub Actions CI/CD

### Phase 3: æ–‡æ¡£å’Œå‘å¸ƒ

- â³ æ­å»ºæ–‡æ¡£ç«™ç‚¹
- â³ é›†æˆ changeset ç®¡ç†ç‰ˆæœ¬
- â³ è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹

### Phase 4: ç”Ÿæ€æ‰©å±•

- â³ æ·»åŠ æ›´å¤šç»„ä»¶
- â³ æä¾›ä¸»é¢˜å®šåˆ¶ç³»ç»Ÿ
- â³ CLI å·¥å…·å¼€å‘

## ğŸ“š å‚è€ƒèµ„æº

- [Element Plus æºç ](https://github.com/element-plus/element-plus)
- [Element Plus æ–‡æ¡£](https://element-plus.org)
- [pnpm Workspace](https://pnpm.io/workspaces)
- [Vite æ–‡æ¡£](https://vitejs.dev)
- [Vitest æ–‡æ¡£](https://vitest.dev)
- [VitePress æ–‡æ¡£](https://vitepress.dev)

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åŒ…çš„ç‹¬ç«‹æ€§

- æ¯ä¸ªåŒ…åº”è¯¥å¯ä»¥ç‹¬ç«‹ä½¿ç”¨
- æœ€å°åŒ–åŒ…ä¹‹é—´çš„ä¾èµ–
- æ¸…æ™°çš„ API è¾¹ç•Œ

### 2. ç±»å‹å®‰å…¨

- å®Œå–„çš„ TypeScript ç±»å‹
- å¯¼å‡ºæ‰€æœ‰å¿…è¦çš„ç±»å‹
- æä¾›ç±»å‹æ¨æ–­æ”¯æŒ

### 3. æ€§èƒ½ä¼˜åŒ–

- Tree-shaking å‹å¥½
- æŒ‰éœ€å¯¼å…¥æ”¯æŒ
- é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

### 4. å¼€å‘ä½“éªŒ

- å¿«é€Ÿçš„çƒ­æ›´æ–°
- æ¸…æ™°çš„é”™è¯¯æç¤º
- å®Œå–„çš„æ–‡æ¡£å’Œç¤ºä¾‹

---

**æœ€åæ›´æ–°**: 2025-11-20  
**ç‰ˆæœ¬**: 1.0.0  
**ç»´æŠ¤è€…**: Lume UI Team
